<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="BoardMapper">
	
	<resultMap id="Board" type="java.util.HashMap">
		<result column="BOARD_SEQ" property="boardSeq" />
		<result column="WRITER" property="writer" />
		<result column="TITLE" property="title" />
		<result column="CONTENT" property="content" />
		<result column="REG_DATE" property="regDate" />
		
		<result column="UPT_DATE" property="uptDate" />
		<result column="VIEW_CNT" property="viewCnt" />
	</resultMap>
	
	<select id="showBoardList" resultMap="Board">
	    select
	        board_seq,
	        writer,
	        title,
	        content,
	        reg_date,
	        upt_date,
	        view_cnt
	    from board
	    order by board_seq desc
	</select>
	
    <insert id="createBoard">
        insert into board(
            board_seq,
            writer,
            title,
            content,
            reg_date,
            view_cnt
            )
        values (
            (select nvl( max(board_seq), 0 ) + 1 from board),
            #{writer},
            #{title},
            #{content},
            sysdate,
            0
        )
    </insert>
    
    <select id="showBoard" resultMap="Board">
    	select
    		board_seq,
    		writer,
    		title,
    		content,
    		reg_date,
    		upt_date,
    		view_cnt
    	from board
    	where board_seq = #{seq}
    </select>
    
    <update id="incViewCnt">
    	update board
    	set
    		view_cnt = nvl(view_cnt, 0) + 1
    	where board_seq = #{seq}
    </update>
    
    <update id="updateBoard">
    	update board
    	set
    		title = #{title},
    		content = #{content},
    		upt_date = sysdate
    	where board_seq = #{seq}
    </update>
    
    <delete id="deleteBoard" parameterType="int">
    	delete from board
    	where board_seq in
    	<foreach item="item" index="index" collection="array"
    		open="(" separator="," close=")">
    		#{item}
    	</foreach>
    </delete>
   
</mapper>